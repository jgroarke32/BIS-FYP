@model ClientMk1.Models.MasterSchools
<!DOCTYPE html>
<html>
<head>
    <link type="text/css" rel="stylesheet" href="~/Content/Site.css" />
    <link type="text/css" rel="stylesheet" href="~/Content/bootstrap.css" />
    <link type="text/css" rel="stylesheet" href="~/Content/waitMe.css" />
    <script type="text/javascript" src="/Scripts/jquery-3.1.1.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery.tablesorter.min.js"></script>
    @*<script type="text/javascript" src="~/Scripts/Misc.js"></script>
        <script type="text/javascript" src="~/Scripts/jquery.tmpl.js"></script>*@
    <script type='text/javascript' src="~/Scripts/knockout-3.4.0.js"></script>
    <script src="~/Scripts/knockout-mapping.js"></script>
    <script type="text/javascript" src="~/Scripts/PrimaryKO.js"></script>
    <script src="~/Scripts/waitMe.js"></script>
    <script type="text/javascript" src="~/Scripts/bootstrap.js"></script>

    @*<script type="text/javascript" src="~/Scripts/ko.simpleGrid.js"></script>*@

    <style>
        /* From http://projects.lukehaas.me/css-loaders/ */
        .loader {
            width: 8em;
            height: 8em;
            box-sizing: border-box;
            border-radius: 50%;
            position: relative;
            border: 1.1em solid #eee;
            border-left: 1.1em solid #999;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: spinner 1.1s infinite linear;
            animation: spinner 1.1s infinite linear;
        }

        @@-webkit-keyframes spinner {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }

            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }

        @@keyframes spinner {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }

            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }

        .hide {
            display: none;
        }
    </style>
    <style>
        .input[type=text] {
            width: 130px;
            -webkit-transition: width 0.4s ease-in-out;
            transition: width 0.4s ease-in-out;
        }

        /* When the input field gets focus, change its width to 100% */
        input[type=text]:focus {
            width: 80%;
        }
    </style>


</head>
<body>
    <h2>PrimarySch</h2>

    <table id="SchoolTable" class="table table-bordered table-hover table-condensed animate-bottom">
        <caption>
            <label>
                <input type='checkbox' data-bind='checked: displayAdvancedOptions' />
                Display advanced options
            </label>

            <div data-bind='fadeVisible: displayAdvancedOptions'>
                <span>Filters:</span><br />
                <div class="filter">
                    <ul data-bind="foreach: filter.filters">

                        @* <li> <span data-bind="text: Name"></span>:</li><br />*@

                        <li class="betterwork" data-bind="if: Type == 'select'">
                            <select class="form-control" data-bind="options: Options, optionsText: 'Name', value: CurrentOption"></select>
                        </li>
                        @*<li class="betterwork" data-bind="if: Type == 'text',visible: Type == 'text'">
                                <input type="text" data-bind="value: Value, valueUpdate: 'afterkeydown'" />
                            </li>*@
                    </ul>
                </div>
                @*<br />
                    <b>Sorts:</b>
                    Field:<br />
                    <select data-bind="options: sorter.sortOptions, optionsText: 'Name', value: sorter.currentSortOption"></select>
                    Direction:
                    <select data-bind="options: sorter.sortDirections, optionsText: 'Name', value: sorter.currentSortDirection"></select>
                    <br />
                    <br />*@
            </div>

            <ul class="pager">
                <li>

                    <span class="displaytxt">
                        <span>Display</span>
                        <select class="table-control-size" data-bind="options: pager.pageSizeOptions, value: pager.currentPageSize, event: { change: pager.onPageSizeChange }"></select>
                        <span>per page</span>
                    </span>
                </li>
                <li data-bind="css: { disabled: pager.currentPageIndex() === 0 }">
                    <a href="#" data-bind='click: pager.moveFirst, enable: pager.currentPageIndex() > 0'>Oldest</a>
                </li>
                <li data-bind="css: { disabled: pager.currentPageIndex() === 0 }">
                    <a href="#" data-bind="click: pager.movePrevious, enable: pager.currentPageIndex()> 0">Previous</a>
                </li>
                <li>
                    <span data-bind="text: pager.Displayrecordsstring"></span>
                </li>
                <li data-bind="css: { disabled: pager.currentPageIndex() === pager.maxPageIndex() }">
                    <a href="#" data-bind="click: pager.moveNext, enable: pager.currentPageIndex() < pager.maxPageIndex()">Next</a>
                </li>
                <li data-bind="css: { disabled: pager.currentPageIndex() === pager.maxPageIndex() }">
                    <a href="#" data-bind="click: pager.moveLast, enable: pager.currentPageIndex() < pager.maxPageIndex()">Last</a>
                </li>
            </ul>
            </nav>
        </caption>
        <thead>
            <tr data-bind="foreach: params">
                <th>
                    <span data-bind="text: $data, click: $root.sortdataclick"></span>
                    <span data-bind="css: $root.sorticon($data)" aria-hidden="true"></span>
                </th>
            </tr>
        </thead>
        @*<div class="NoRecords">><span data-bind="visible: pager.recordCount()==0">No records found.</span></div>*@
        <tbody data-bind="foreach: pager.currentPageRecords">
            <tr data-bind="click: $root.showModal">
                <td>
                    <span data-bind="text: OfficialSchoolName"></span><br />
                    <font size="2" data-bind="text: Address1"></font>
                    <font size="2" data-bind="text: Address2"></font>
                    <font size="2" data-bind="text: Address3"></font>
                    <font size="2" data-bind="text: Address4"></font>
                </td>
                <td>
                    <span data-bind="text: County"></span>
                </td>
                <td>
                    <span data-bind="text: SchoolGender"></span>
                </td>
                <td>
                    <span data-bind="text: IrishClassification"></span>
                </td>
                <td>
                    <span data-bind="text: FeePaying"></span>
                </td>
                <td>
                    <span data-bind="text: Religion"></span>
                </td>
                <td>
                    <span data-bind="text: TotalEnrolments"></span>
                </td>
            </tr>
        </tbody>
        <thead>
            <tr data-bind="foreach: params">
                <th>
                    <span data-bind="text: $data, click: $root.sortdataclick"></span>
                    <span data-bind="css: $root.sorticon($data)" aria-hidden="true"></span>
                </th>
            </tr>
        </thead>
    </table>

    <nav class="pagination-centered">
        <ul class="pagination">
            <li data-bind="css: { disabled: pager.currentPageIndex() === 0 }"><a href="#" data-bind="click: pager.moveFirst">Previous</a></li>
            <li data-bind="foreach: pager.PagesCount">
                <a href="#" data-bind="visible: $root.pager.showPages($data),text: $data.pageNumber, click: function() { $root.pager.changePageIndex($data.pageNumber-1); }"></a></a>
            </li>
            <li data-bind="css: { disabled: pager.currentPageIndex() === pager.maxPageIndex() }"><a href="#" data-bind="click: pager.moveNext">Next</a></li>
            <li>
                <span data-bind="text: $root.pager.Displaypagesstring" style="color:black"></span>
            </li>
        </ul>
    </nav>

    <!-- Modal -->
    <div class="modal fade" id="SchoolModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel" data-bind="text: SelectedSchool().OfficialSchoolName"></h4>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
